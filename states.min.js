(function(){"use strict";var t,e,i=[].slice;e=function(){var t,e;return(e="undefined"!=typeof window&&null!==window?window.Types:void 0)||(e=require("types.js")),e?t=function(){function t(t){t=e.forceObject(t),this.min=e.forceNumber(t.min,1),this.current=e.forceNumber(t.current,this.min),this.stepSize=e.forceNumber(t.stepSize,1),this.setMax(t.max||this.min),this.up=e.forceBoolean(t.up,!0),this.pattern=e.forceString(t.pattern,"limit"),this.delay=e.forceNumber(t.delay,1e3),this.events={},this.defaultEvent=function(){return""}}var n;return n=function(t,e,i){return t>i?i:e>t?e:t},t.prototype.setStep=function(t){return null==t&&(t=this.stepSize),this.stepSize=n(t,1,this.range)},t.prototype.updateRange=function(){return this.current=n(this.current,this.min,this.max),this.range=this.max+1-this.min,this.setStep(),this.range},t.prototype.setMin=function(t){return t=e.forceNumber(t),t["void"]||(this.min=n(t,t,this.max),this.updateRange()),this.min},t.prototype.setMax=function(t){return t=e.forceNumber(t),t["void"]||(this.max=t,this.min=n(this.min,this.min,this.max),this.updateRange()),this.max},t.prototype.setCurrent=function(t){return t=e.forceNumber(t),t["void"]?this.current:this.current=n(t,this.min,this.max)},t.prototype.limit=function(t){return n(this.current+t,this.min,this.max)},t.prototype.rotate=function(t){var e;return e=this.current+t,e<this.min?this.max-(this.min-(e+1)):e>this.max?this.min+(e-1-this.max):e},t.prototype.yoyo=function(){var t,e;return this.range===this.stepSize?this.up?this.max:this.min:(t=this.current+this.stepSize,this.up&&t>this.max?(this.up=!1,this.max-(t-this.max)):(e=this.current-this.stepSize,!this.up&&e<this.min?(this.up=!0,this.min-(e-this.min)):this.up?t:e))},t.prototype.random=function(){return this.current=(Math.random(this.range)*this.range|0)+this.min},t.prototype.peek=function(t){switch(t){case void 0:t=this.stepSize;break;case!1:t=-this.stepSize;break;default:!function(i){return function(){return t=e.forceNumber(t,0),Math.abs(t)>=i.range?t=0:void 0}}(this)()}return this[this.pattern](t)},t.prototype.eachStep=function(t,i){var n,r,s,u,o,h,a,p,c;for(null==t&&(t=this.stepSize),e.isFunction(t)&&(i=t,t=this.stepSize),0>t?(t=Math.abs(t),o=[this.max,this.min],u=o[0],s=o[1]):(h=[this.min,this.max],u=h[0],s=h[1]),c=[],r=n=a=u,p=s;p>=a?p>=n:n>=p;r=p>=a?++n:--n)r%t===0&&c.push(i?i(r):r);return c},t.prototype.each=function(t){return this.eachStep(1,t)},t.prototype.addEvent=function(t,e){return this.events[t]=e},t.prototype.removeEvent=function(t){return delete this.events[t]},t.prototype.call=function(){var t,n;return n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],null==n&&(n=this.current),t.unshift(n),e.forceFunction(this.events[n],function(e){return function(){return e.defaultEvent(t)}}(this)).apply(null,t)},t.prototype.next=function(){return this.current=this[this.pattern](this.stepSize)},t.prototype.nextCall=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],this.call(this.next(),t)},t.prototype.prev=function(){return this.current=this[this.pattern](-this.stepSize)},t.prototype.prevCall=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],this.call(this.prev(),t)},t.prototype.run=function(t){var e;return e=0>t,this.interval?void 0:(t=this.setCurrent(t),this.interval=setInterval(function(t){return function(){return t.call(e?t.prev():t.next())}}(this),this.delay))},t.prototype.stop=function(){return this.interval|=clearInterval(this.interval)},t}():void 0},(t=e())&&("undefined"!=typeof define&&null!==define&&"function"==typeof define&&define.amd?define("states",[],function(){return t}):"undefined"!=typeof module?module.exports=t:"undefined"!=typeof window&&(window.States=t))}).call(this);
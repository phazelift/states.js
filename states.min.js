(function(){"use strict";var t,e,i=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},n=[].slice;if("undefined"!=typeof window&&null!==window?e=window.Types:"undefined"!=typeof module&&null!==module&&(e=require("types.js")),!e)throw new Error("states.js cannot initialize, the required types.js was not found!");t=function(){function t(t){t=e.forceObject(t),this.min=e.forceNumber(t.min,1),this.current=e.forceNumber(t.current,this.min),this.stepSize=e.forceNumber(t.stepSize,1),this.range=1,this.setMax(t.max||this.min),this.up=e.forceBoolean(t.up,!0),this.pattern=this.setPattern(),this.delay=e.forceNumber(t.delay,1e3),this.events={},this.defaultEvent=function(){return""},this.lastCallResult=void 0}var r,s;return r=["limit","rotate","yoyo","random"],s=function(t,e,i){return t>i?i:e>t?e:t},t.prototype.setStep=function(t){return null==t&&(t=this.stepSize),this.stepSize=s(t,1,this.range)},t.prototype._updateRange=function(){return this.current=s(this.current,this.min,this.max),this.range=this.max+1-this.min,this.setStep(),this.range},t.prototype.setMin=function(t){return t=e.forceNumber(t),t["void"]||(this.min=s(t,t,this.max),this._updateRange()),this.min},t.prototype.setMax=function(t){return t=e.forceNumber(t),t["void"]||(this.max=t,this.min=s(this.min,this.min,this.max),this._updateRange()),this.max},t.prototype.setPattern=function(t){return t=e.forceString(t),i.call(r,t)>=0?(this.pattern="_"+t,t):(this.pattern="_limit","limit")},t.prototype.setCurrent=function(t){return t=e.forceNumber(t),t["void"]?this.current:this.current=s(t,this.min,this.max)},t.prototype._limit=function(t){return s(this.current+t,this.min,this.max)},t.prototype._rotate=function(t){var e;return e=this.current+t,e<this.min?this.max-(this.min-(e+1)):e>this.max?this.min+(e-1-this.max):e},t.prototype._yoyo=function(){var t,e;return this.range===this.stepSize?this.up?this.max:this.min:(t=this.current+this.stepSize,this.up&&t>this.max?(this.up=!1,this.max-(t-this.max)):(e=this.current-this.stepSize,!this.up&&e<this.min?(this.up=!0,this.min-(e-this.min)):this.up?t:e))},t.prototype._random=function(){return this.current=(Math.random(this.range)*this.range|0)+this.min},t.prototype.peek=function(t){switch(t){case void 0:t=this.stepSize;break;case!1:t=-this.stepSize;break;default:!function(i){return function(){return t=e.forceNumber(t,0),Math.abs(t)>=i.range?t=0:void 0}}(this)()}return this[this.pattern](t)},t.prototype.eachStep=function(t,i){var n,r,s,u,o,h,a,p,c;for(null==t&&(t=this.stepSize),e.isFunction(t)&&(i=t,t=this.stepSize),0>t?(t=Math.abs(t),o=[this.max,this.min],u=o[0],s=o[1]):(h=[this.min,this.max],u=h[0],s=h[1]),c=[],r=n=a=u,p=s;p>=a?p>=n:n>=p;r=p>=a?++n:--n)r%t===0&&c.push(i?i(r):r);return c},t.prototype.each=function(t){return this.eachStep(1,t)},t.prototype.addEvent=function(t,e){var i;return this.events[t]=e,t>=(i=this.min)&&i<=this.max},t.prototype.removeEvent=function(t){return delete this.events[t]},t.prototype.call=function(){var t,i;return i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],null==i&&(i=this.current),t.unshift(i),e.forceFunction(this.events[i],function(e){return function(){return e.defaultEvent(t)}}(this)).apply(null,t)},t.prototype.next=function(){return this.current=this[this.pattern](this.stepSize)},t.prototype.nextCall=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.call(this.next(),t)},t.prototype.prev=function(){return this.current=this[this.pattern](-this.stepSize)},t.prototype.prevCall=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.call(this.prev(),t)},t.prototype.run=function(t){var e;return e=0>t,this.interval?void 0:(t=this.setCurrent(t),this.interval=setInterval(function(t){return function(){return t.lastCallResult=t.call(e?t.prev():t.next())}}(this),this.delay))},t.prototype.stop=function(){return this.interval|=clearInterval(this.interval)},t}(),"undefined"!=typeof define&&null!==define&&"function"==typeof define&&define.amd?define("states",[],function(){return t}):"undefined"!=typeof module&&null!==module?module.exports=t:"undefined"!=typeof window&&null!==window&&(window.States=t)}).call(this);